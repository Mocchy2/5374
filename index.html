<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>Google Mapsの練習</title>
	<script src="http://maps.google.com/maps/api/js?sensor=true&langage=ja"></script> <!--Google Maps APIの呼び出し-->
	<style>
		#map {
			width: 100%; /*マップの幅*/
			height: 80%; /*マップの高さ*/
		}
	</style>
</head>
<body>
	<p>住所:<input type="text" id="address" value=""><input type="button" value="表示!" onclick="moveMap();"></p>
	<div id="map"></div> <!--地図を表示する領域-->
	<script>
		var latlng = new google.maps.LatLng(35.66, 139.69); //緯度経度を示すオブジェクト
		var options = {
			zoom: 15, //地図のズームレベル
			center: latlng, //地図の中心の緯度経度
			mapTypeId: google.maps.MapTypeId.ROADMAP //地図の種類（ここでは通常の地図）
		}
		var map = new google.maps.Map(document.getElementById('map'), options); //地図を作製する

		//この下にデータを入力
		


		//住所を入力して地図を移動させる
		function moveMap(){
			//住所が入ることを想定しているので、ジオコーディングを使う
			var geocoder = new google.maps.Geocoder(); 
			geocoder.geocode({
				'address': document.getElementById('address').value
			}, function(result, status){
				//エラー処理で分ける
				if(status == google.maps.GeocoderStatus.OK){
					map.panTo(result[0].geometry.location); //地図を移動させる処理を書く
					/*
					var marker = new google.maps.Marker({   //マーカーを立てる
						position: result[0].geometry.location,
						map: map

					});*/
				} else {
					alert("ERROR!");
				}
			});
		}


		//現在地を取得する
		if(navigator.geolocation){ //navigator（ブラウザのこと）がgeolocationに対応していた場合
			navigator.geolocation.getCurrentPosition(function(position){ //現在地の取得
				//取得した緯度経度をもとにマップを移動させる
				map.setCenter(new google.maps.LatLng(position.coords.latitude,position.coords.longitude));
			/*	var marker = new google.maps.Marker({   //マーカーを立てる
					position: result[0].geometry.location,
					map: map

				});*/			
		}, function(){
				alert('現在地を取得できません！'); //現在地が取得できなかった場合
		});

		} else {
			alert('対応していません！');
		}
	</script>
</body>
</html>

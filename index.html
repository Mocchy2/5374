html lang="ja">
<head>
	<meta charset="utf-8">
	<title>Google Mapsの練習</title>
	<script src="http://maps.google.com/maps/api/js?sensor=true&langage=ja"></script> <!--Google Maps APIの呼び出し-->
	<style>
		#map {
			width: 100%; /*マップの幅*/
			height: 80%; /*マップの高さ*/
		}
	</style>
</head>
<body>
	<div id="map"></div> <!--地図を表示する領域-->
	<script>
		var geocoder = new google.maps.Geocoder(); //ジオコーダー
		var latlng = new google.maps.LatLng(35.66, 139.69); //緯度経度を示すオブジェクト
		var options = {
			zoom: 15, //地図のズームレベル
			center: latlng, //地図の中心の緯度経度
			mapTypeId: google.maps.MapTypeId.ROADMAP //地図の種類（ここでは通常の地図）
		}
		var map = new google.maps.Map(document.getElementById('map'), options); //地図を作製する


		/*現在地を取得する*/
		if(navigator.geolocation){ //navigator（ブラウザのこと）がgeolocationに対応していた場合
			navigator.geolocation.getCurrentPosition(function(position){ //現在地の取得
				map.setCenter(new google.maps.LatLng(position.coords.latitude,position.coords.longitude)); //取得した緯度経度をもとにマップを移動させる

				var marker =new google.maps.Marker({ //マーカーを立てる
					position: map.getCenter(), //latingで求めた中心地を緯度経度で返す
					map: map //描画先はマップ
				});

				geocoder.geocode({ //
					'latLng': map.getCenter()
				}, function(result, status){
					if(status == google.maps.GeocoderStatus.OK){
						
						
						var infoWindow = new google.maps.InfoWindow({ //情報ウィンドウを表示させる
							content: result[0].formatted_address //情報ウィンドウに何を表示させるか(ここでは現在地の住所)
						});

						google.maps.event.addListener(marker, 'click', function(){ //マーカーに対してクリックしたら情報ウィンドウを表示する
							infoWindow.open(map, marker); //情報ウィンドウを表示する
						});
					} else {
						alert("エラー！");
					}
				});

		}, function(){
				alert('現在地を取得できません！'); //現在地が取得できなかった場合
		});

		} else {
			alert('対応していません！'); //ブラウザが対応していない場合
		}
	</script>
</body>
</html>
